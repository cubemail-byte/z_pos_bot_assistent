# Контекст проекта

Проект представляет собой Telegram-бот для эскалационного клиентского чата (POS / терминалы).

Важно:
- это НЕ Service Desk
- это НЕ система обработки заявок
- бот не вмешивается в диалог и не отвечает в группах

## Назначение бота

Бот предназначен для:
- бесшумного сбора всей переписки в эскалационных чатах
- сохранения полного raw-контекста сообщений
- последующего анализа проблем, реакций и повторяемости инцидентов

## Текущая архитектура (v1)

### Ingestion
- бот получает все сообщения чата
- сохраняет их в таблицу `messages` в максимально сыром виде
- сохраняются:
  - текст
  - reply / forward
  - metadata Telegram
  - service events
  - raw JSON

### Классификация сообщений (v1)
- при поступлении нового сообщения бот:
  - создаёт строку в `message_classification` со статусом `UNCLASSIFIED`
  - пытается классифицировать сообщение по rules.yaml (rule-based, без ИИ)
- если правило срабатывает:
  - сообщение получает тип проблемы
- если правило не срабатывает:
  - сообщение остаётся `UNCLASSIFIED`

### Принципы классификации
- классификация best-effort
- отсутствие классификации считается допустимым результатом
- ложные срабатывания хуже, чем отсутствие классификации
- переобработка возможна на следующих этапах (offline)

## Ограничения v1
- бот не определяет конфигурационные единицы (АЗС, терминал, рабочее место)
- бот не анализирует Service Desk заявки
- бот не отвечает на сообщения и не управляет диалогом
